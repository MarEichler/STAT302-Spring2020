---
title: "L01 Introduction"
subtitle: "Data Visualization (STAT 302)" 
date: 2020-04-12
author: "Martha Eichlersmith"
output:
  html_document:
    toc: true
    toc_float: true
    highlight: "tango"
---

```{r setup, echo=FALSE}
knitr::opts_chunk$set(echo=TRUE)
```



```{r load-packages, warning=FALSE, message=FALSE}
library(tidyverse)
library(ggstance)
library(skimr)
```


## Exercise 1

Let's look at some interesting patterns in the history of LEGO! We'll be using data from the [**lego** package](https://github.com/seankross/lego) located `data/legosets.rda`. We will work through this exercise together in class.

```{r loaddata}
load(file = "data/legosets.rda")
```


### 1a Inspect the data

The **lego** package provides a helpful dataset some interesting variables. Let's take a quick look at the data.

```{r dataset}
head(legosets)
colnames(legosets)
```


<br>

### 1b Price per year

First, let's look at the average cost of LEGO sets over time. The main variable of interest here is `USD_MSRP`, or the manufacturer's suggested retail price in constant dollars (i.e. not adjusted for inflation).  

```{r priceVtime}
df.1b <- legosets %>%
  group_by(Year) %>%
  summarize(
    AverageCost = #name the column
      mean( #find the mena
        USD_MSRP #what you wnat to find the mean of 
        , na.rm=TRUE #ignore (remove) NA's
        )
    )

ggplot(df.1b, aes(Year, AverageCost))+
  geom_point()+
  geom_line()+
  ggtitle("Lego Sets: Average Price vs Year")
```
<br><br>

### 1c Pieces per year

Next, let’s look at how the number of pieces per set has changed over time. Because Duplo sets are much smaller (since they’re designed for toddlers), we’ll make a special indicator variable for them.


```{r piecesVtime}
#subset large df (just to make it simpler) - and don't want to amend actual legosets df 
legosubset1c<- select(legosets, Year, Theme, Pieces)

#function: to make theme into binary "Duplo" and "Not Duplo" variable 
myefunc_IsDuplo <- function(input){
  if (input == "Duplo" ){output= "Duplo"}
  else {output = "Not Duplo"}
  return(output)
}

#add binary duplo variable to df
legosubset1c$IsDuplo <- sapply(legosubset1c$Theme, myefunc_IsDuplo)

#create df with avg pieces grouped by year and duplo status
df.1c <- legosubset1c  %>%
  group_by(Year, IsDuplo) %>%
  summarize(
    AveragePieces = #name the column
      mean( #find the mena
        Pieces #what you wnat to find the mean of 
        , na.rm=TRUE #ignore (remove) NA's
        )
    )

#same plot 
ggplot(df.1c, aes(Year, AveragePieces, color=IsDuplo))+
  geom_point()+
  geom_line()+
  ggtitle("Lego Sets: Average Pieces vs Year")
#facet plots
ggplot(df.1c, aes(Year, AveragePieces, color=IsDuplo))+
  facet_wrap(~IsDuplo, ncol=2, scales="fixed")+
  geom_point()+
  geom_line()+
  ggtitle("Lego Sets: Average Pieces vs Year")
```




### 1d LEGO set themes

In the 1990s, [LEGO began partnering with famous brands and franchises](https://www.cnbc.com/2018/04/27/lego-marketing-strategy-made-it-world-favorite-toy-brand.html) to boost its own sales. First, let's see how many different "themes" LEGO now offers:

```{r numberofthemes}
length(unique(legosets$Theme))
```

